{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"themes/hexo-theme-butterfly-dev/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-butterfly-dev/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/board/condition.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1640508642733},{"_id":"source/CNAME","hash":"8ada2b6a73ade6c75dd4a24e7311ae2556095096","modified":1643077225969},{"_id":"source/_drafts/newpage.md","hash":"8a51a9a9fbe423981ece06b4164237e4c8d2d01c","modified":1643621631347},{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":499162500000},{"_id":"source/_posts/并发编程的意义.md","hash":"ee7cffe2bdc186e89cdcc3c5e8af198f9783af43","modified":1643624229353},{"_id":"source/board/index.md","hash":"590a94195a8e579fa6918d3a71fa3eb7b064756d","modified":1643621473184},{"_id":"source/board/并发编程的意义.md","hash":"ee7cffe2bdc186e89cdcc3c5e8af198f9783af43","modified":1643624258458},{"_id":"source/board/并发-同步锁.md","hash":"f5c5d118182aae52af5bdabed7100ded65446a95","modified":1643624278411},{"_id":"source/board/线程安全-可见性有序性.md","hash":"7213c6dc9818ff0a3b1db57721205185c7d60fb5","modified":1643624296788},{"_id":"themes/hexo-theme-butterfly-dev/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/README_CN.md","hash":"49ace5208f98783344f17a00adab7641cda43280","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/README.md","hash":"6ee27baf95a5741abbc224ef8938d679b6597665","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/_config.yml","hash":"fb299c69546534ce4087faf5c113eb8cdac58055","modified":1643676768879},{"_id":"themes/hexo-theme-butterfly-dev/package.json","hash":"bed90f39a3bcf23dcfeb0893a366de0a2fab4ab3","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/.github/stale.yml","hash":"05a55a87fa7f122c59683e41c8b2e37e79f688f0","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/languages/en.yml","hash":"7fe7528ed2778fe39444df2bc7e64f09e1302e97","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/languages/default.yml","hash":"1177f2177945c3e2447c6c0208e6ffdf0c0b186c","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/languages/zh-CN.yml","hash":"b1ba98565fe2d28e956225cf9e8a21f329ee060e","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/category.pug","hash":"710708cfdb436bc875602abf096c919ccdf544db","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/languages/zh-TW.yml","hash":"38b32ab2aa3e2ebb9ef3c993c8dca42f1e000cd5","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/archive.pug","hash":"bd62286afb64a51c97e800c5945620d51605d5fa","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/post.pug","hash":"fc9f45252d78fcd15e4a82bfd144401cba5b169a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/page.pug","hash":"baf469784aef227e4cc840550888554588e87a13","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/.github/ISSUE_TEMPLATE/bug_report.md","hash":"476802922b774b679225102ac30a9d9183394701","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/.github/ISSUE_TEMPLATE/custom.md","hash":"eff495eb1584cf4586e33c76e8b2fa6a469a179b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/.github/ISSUE_TEMPLATE/feature_request.md","hash":"f6867a2f0417fe89a0f2008730ee19dd38422021","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/.github/workflows/publish.yml","hash":"05857c2f265246d8de00e31037f2720709540c09","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/404.pug","hash":"cb49f737aca272ccfeb62880bd651eccee72a129","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/additional-js.pug","hash":"ab3bdeb6e0acd3d58091698c1335afb069eea7e5","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head.pug","hash":"5945f6f7f963b3ed1cc50e7e7d2e4929e1c1440c","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/layout.pug","hash":"6f2608c4d93d3d10ae6b2cd7f8918f303f024321","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/pagination.pug","hash":"0b80f04950bd0fe5e6c4e7b7559adf4d0ce28436","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/sidebar.pug","hash":"f093ab771257a6a939b194f68607a2038c8d7da3","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/rightside.pug","hash":"428758c2459fd31efaf816c39693edb4f716b861","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/events/config.js","hash":"0ace90c45322ae386a3f974ab74c92e8d0dd0ab2","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/events/init.js","hash":"a7f567b3d3110afe2f99c967b8e15351a7f5bd6d","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/events/stylus.js","hash":"9819f0996234fbd80d6c50a9e526c56ebf22588d","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/events/welcome.js","hash":"d575137c8779e50422c2416f4d0832fdea346ee6","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/helpers/aside_categories.js","hash":"e00efdb5d02bc5c6eb4159e498af69fa61a7dbb9","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/helpers/inject_head_js.js","hash":"6a103a2472903289bdecd5240eb89cac0b9e13d9","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/helpers/page.js","hash":"c6611d97087c51845cb1ab4821696a62fa33daeb","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/helpers/related_post.js","hash":"21556f9cb412ddc500ad12ecfd419f3ea6c9f663","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/button.js","hash":"91d954f6e9fe6e571eb8ec9f8996294b2dc3688e","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/gallery.js","hash":"f79c99f6c5b626c272dc2bed2b0250d6b91bb28a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/hide.js","hash":"a091f82d8897adb2347c228e544e29363c679d1f","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/inlineImg.js","hash":"a43ee2c7871bdd93cb6beb804429e404570f7929","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/label.js","hash":"03b2afef41d02bd1045c89578a02402c28356006","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/mermaid.js","hash":"531808a290b8bdd66bac2faab211ada8e9646a37","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/tabs.js","hash":"6c6e415623d0fd39da016d9e353bb4f5cca444f5","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/note.js","hash":"c16c6eb058af2b36bcd583b2591076c7ebdd51ad","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/tag/timeline.js","hash":"300eb779588bf35a1b687d9f829d866074b707e3","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/index.styl","hash":"861998e4ac67a59529a8245a9130d68f826c9c12","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/var.styl","hash":"4890a40366d6443f8b8942a4e9a6dce9fe3494f5","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/filters/post_lazyload.js","hash":"932df912976261929f809b7dbd4eb473e7787345","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/scripts/filters/random_cover.js","hash":"21379ed2dccb69c43b893895c9d56238c11e5f43","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/js/main.js","hash":"1254dca2c02b3389ec0434cdd2728fdea4ae0216","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/js/utils.js","hash":"3ee4bd9071dc6e854ffa33964f3a8da2ee2a8409","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/Open_Graph.pug","hash":"6c41f49a3e682067533dd9384e6e4511fc3a1349","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/analytics.pug","hash":"15530d9ac59c576d79af75dd687efe71e8d261b0","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/config.pug","hash":"9e58c80af8bbd0c66ccb4f94d3781818cebf0d66","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/config_site.pug","hash":"7df90c8e432e33716517ab918b0a125bc284041b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/noscript.pug","hash":"d16ad2ee0ff5751fd7f8a5ce1b83935518674977","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/preconnect.pug","hash":"65a23b5170204e55b813ce13a79d799b66b7382c","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/header/index.pug","hash":"65fa23680af0daf64930a399c2f2ca37809a8149","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/header/menu_item.pug","hash":"31346a210f4f9912c5b29f51d8f659913492f388","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/header/social.pug","hash":"0d953e51d04a9294a64153c89c20f491a9ec42d4","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/header/nav.pug","hash":"78a3abd90bb3c18cd773d3d5abac3541e7f415e5","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/header/post-info.pug","hash":"dc3913c1a6dd207051c3d3414a33851ae8bc0a45","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/loading/loading-js.pug","hash":"4cfcf0100e37ce91864703cd44f1cb99cb5493ea","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/loading/loading.pug","hash":"5276937fbcceb9d62879dc47be880cd469a27349","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/mixins/article-sort.pug","hash":"2fb74d0b0e4b98749427c5a1a1b0acb6c85fadc4","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/mixins/post-ui.pug","hash":"b9ebb02af8ccf43e3f73be43db19254fa913c57b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/page/flink.pug","hash":"fed069baa9b383f57db32bb631115071d29bdc60","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/page/tags.pug","hash":"6311eda08e4515281c51bd49f43902a51832383c","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/post/post-copyright.pug","hash":"88e3b611b03149665e4113cfa39595c1a3fca7e5","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/post/reward.pug","hash":"864869c43fe5b5bb6f4ac6b13dd4bfb16ea47550","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/aplayer.pug","hash":"292646dfab135973b09f0fa9e3931e83da2ed30e","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/effect.pug","hash":"b9d54a01d7c2a7a183cb7209e99430ce7fea1fe3","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/pangu.pug","hash":"d5fec7dedc52ab23865fb4db002755e9bdaadc9f","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/prismjs.pug","hash":"1fbecfd299068f90d727f0c8c65e2a792fa6e3e2","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/pjax.pug","hash":"d4072f9ab79f4ac49aa251ae470abc45a2fddbd6","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/subtitle.pug","hash":"b63fd8ec48d782f51ee11226753fed1998bbf34a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_announcement.pug","hash":"3d8e3706a056389176f55dd21956aabc78046761","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_author.pug","hash":"0380a1e048e6219ea4b4a8a4eadba960edf308f0","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_newest_comment.pug","hash":"6d93564a8bd13cb9b52ee5e178db3bcbf18b1bc6","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_tags.pug","hash":"438aea3e713ed16b7559b9a80a9c5ec0221263df","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_recent_post.pug","hash":"9c1229af6ab48961021886882c473514101fba21","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_post_toc.pug","hash":"3057a2f6f051355e35d3b205121af8735100eacf","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/card_webinfo.pug","hash":"0612aaee878f33ea8d3da0293c7dc3b6cd871466","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/widget/index.pug","hash":"7fb096656c8a6c21a4b6a5100885b1081d6021ed","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_global/function.styl","hash":"d9bbe20a4029e542fee9f1e1013d28d767605ffc","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_global/index.styl","hash":"714f19e7d66df84938bd1b82b33d5667abe1f147","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_highlight/highlight.styl","hash":"facf3bec0afce3bc6d077cf1939818efc7fe3bf1","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_highlight/theme.styl","hash":"bcd384c8b2aa0390c9eb69ac1abbfd1240ce1da4","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/aside.styl","hash":"085e61a75588e86a6bdba75da7803411485c7b5a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/chat.styl","hash":"29f48f9370f245e6e575b5836bccf47eb5688d8b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/footer.styl","hash":"26be2afa9d4e7016cf3c42a6cd166f01e8e4ad5c","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/comments.styl","hash":"c61dccca690d486c3d9c29cf028d87b777385141","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/head.styl","hash":"d97c1722ce0fcc319f1f90ec2d51f9d746748e2b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/loading.styl","hash":"ef21990de28bd75dcd0f88b8d616e1a7a137502f","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/pagination.styl","hash":"4825b1751ae46ca005b2af9d6e0a3e477c82b1f9","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/post.styl","hash":"193a05ab27aa5ea0fbbe0066f841cbd540db6517","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/relatedposts.styl","hash":"d53de408cb27a2e704aba7f7402b7caebe0410d8","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/reward.styl","hash":"c5cfed620708807a48076b5ee59b0ba84e29aa80","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/rightside.styl","hash":"bd88ee30ebf8ca2e7b4d3a034c317fd61733921f","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/sidebar.styl","hash":"1bcbc80dff19cd53d0b367c3b9a3c751d3a1f10d","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_layout/third-party.styl","hash":"66c8c94bdc62e00e1dd848582aa2612ae22c1066","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_mode/darkmode.styl","hash":"1bfe7554c3aa8ccc6fcba5e027086188ca0a7ad7","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_mode/readmode.styl","hash":"69f8e9414526dfda3af9a71c8e528fdd0ecbbfe5","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_page/archives.styl","hash":"6f4b4ede52305bce9b22c8c897dcbde8af6e2ce4","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_page/common.styl","hash":"a58d35d698885f1034dedbe99f7dbc1a801412c6","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_page/flink.styl","hash":"91dfd28d7e5f2113e27c8ae854337d316ca1c48f","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_page/homepage.styl","hash":"826dae759062d8f84eb2bf5ab8fdb80e0f79d58b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_search/algolia.styl","hash":"656f9007d94cf29a20532705d94fb7f22827e6fe","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_search/index.styl","hash":"0290605c4984882990059eefe3ad18d2ac6a19ef","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_search/local-search.styl","hash":"e4c987c0202162b50dec91e1df74665d0fa933c9","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/button.styl","hash":"45f0c32bdea117540f6b14ebac6450d7142bd710","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/gallery.styl","hash":"a310e48f826a4cacc55d8e68f43806e5085554f6","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/hide.styl","hash":"bb2a9b7937818ff3a154c8c1009f13b534e77ec3","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/note.styl","hash":"08493b66b9f31f2bd3e9a3115017a0ce16142b20","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/tabs.styl","hash":"bf9568444dd54e39dc59b461323dcd38942f27d9","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_tags/timeline.styl","hash":"f071156d439556e7463ed4bc61ceee87170d5d08","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_third-party/normalize.min.css","hash":"2c18a1c9604af475b4749def8f1959df88d8b276","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/js/search/algolia.js","hash":"aaa5e44125dcf321866bc2355a73773b11db8c9c","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/js/search/local-search.js","hash":"72911c7b42e0174a979c09ead3f42ee24136feae","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/chat/crisp.pug","hash":"76634112c64023177260d1317ae39cef2a68e35f","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/chat/chatra.pug","hash":"481cd5053bafb1a19f623554a27d3aa077ea59c3","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/chat/daovoice.pug","hash":"cfe63e7d26a6665df6aa32ca90868ad48e05ec04","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/chat/gitter.pug","hash":"d1d2474420bf4edc2e43ccdff6f92b8b082143df","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/chat/tidio.pug","hash":"24a926756c2300b9c561aaab6bd3a71fdd16e16d","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/chat/index.pug","hash":"3f05f8311ae559d768ee3d0925e84ed767c314d3","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/card-post-count/disqus.pug","hash":"d85c3737b5c9548553a78b757a7698df126a52cf","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/card-post-count/fb.pug","hash":"7848ec58c6ec03243abf80a3b22b4dc10f3edf53","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/card-post-count/index.pug","hash":"e3bf847553515174f6085df982f0623e9783db7a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/card-post-count/valine.pug","hash":"bba9871f446c10ffcc8fa9023f5a2eb701a86bae","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/card-post-count/twikoo.pug","hash":"ef1b2b5b980d6aeaa5d06b97d1afc9644b155a16","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/card-post-count/waline.pug","hash":"400ce038548d6f9ddb486150c724c87b6923a88b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/disqusjs.pug","hash":"143236e395c18d80ab8dc794821eb337c85f6b32","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/disqus.pug","hash":"a111407fdcafcf1099e26ffa69786f8822c5d9fb","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/facebook_comments.pug","hash":"6852d4fa5fff3fe52fdc41875a2c7af57f286b3a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/gitalk.pug","hash":"9c96e6e67931977268b218b99084b98597c2e42b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/giscus.pug","hash":"0764709381fa29778f6390d645ed137d2f91228f","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/index.pug","hash":"e4850f2c9ba5f6b2248808f7257662679e0fab0a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/js.pug","hash":"9302837f1e35f153323bb4f166514c7e96e8ecdd","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/livere.pug","hash":"52ea8aa26b84d3ad38ae28cdf0f163e9ca8dced7","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/twikoo.pug","hash":"c271cacbac14ed665bbf47aa9c6e74e94c69dcef","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/utterances.pug","hash":"c1c75abe5c899618ed6699c97ac999544840098a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/waline.pug","hash":"7648e4cb0b224f480b5f1356d64f62c9235f6723","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/comments/valine.pug","hash":"59c22ebf3aaee90152e7cdb17ff5841c888fcd82","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/math/mathjax.pug","hash":"a47d8f9f593091cc91192c0c49deaa2c0d2317fd","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/math/katex.pug","hash":"f9b00ead54573ba6e6eb33481588af144aab648d","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/math/mermaid.pug","hash":"0a7587a0211011b5942edba2aa80d51169561d30","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"04b2a5882e789a988e41d45abe606f0617b08e38","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/newest-comments/github-issues.pug","hash":"e846ddfe4a63b15d1416f6055f5756af5e3da7c6","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/newest-comments/index.pug","hash":"f6506ccfd1ce994b9e53aa95588d0b6dbad11411","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/newest-comments/valine.pug","hash":"9028efac78e4122acd734edd5ef9110ef3f05cd1","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"ac811c1d6e0bf08aeb933ade1b9557e0c560d0c9","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/newest-comments/waline.pug","hash":"5e32d903903c76db55a625640f9417d15a3a312f","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/share/index.pug","hash":"4c4a9c15215ae8ac5eadb0e086b278f76db9ee92","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/share/share-js.pug","hash":"006acc91ce25fc7c7d778ca043e970f57dc46b83","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/share/addtoany.pug","hash":"309f51bc5302e72fc469d54c577fbcfe57fb07a8","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/search/algolia.pug","hash":"c92df4f9d0611cf44c1a4491e226f242ec80f5bb","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/search/index.pug","hash":"da3b9437d061ee68dbc383057db5c73034c49605","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/layout/includes/third-party/search/local-search.pug","hash":"8ce336a4c8cae81b58ee26ff51040ca650ff1519","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_highlight/highlight/index.styl","hash":"18804c58239d95798fa86d0597f32d7f7dd30051","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_highlight/prismjs/line-number.styl","hash":"8970cc1916c982b64a1478792b2822d1d31e276d","modified":1642675704000},{"_id":"themes/hexo-theme-butterfly-dev/source/css/_highlight/prismjs/index.styl","hash":"5dc2e0bcae9a54bfb9bdcc82d02ae5a3cf1ca97d","modified":1642675704000},{"_id":"public/atom.xml","hash":"c5faefeadab71b35f6147d2c21e85dd3e2b5b38c","modified":1643676784027},{"_id":"public/sitemap.xml","hash":"ba237fe2020f22217e84cd53a5e1e137fe53d473","modified":1643676784027},{"_id":"public/board/并发编程的意义.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1643676784027},{"_id":"public/board/并发-同步锁.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1643676784027},{"_id":"public/board/线程安全-可见性有序性.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1643676784027},{"_id":"public/board/condition.html","hash":"5978d58d24253335d6010907b610ddc558b08029","modified":1643676784027},{"_id":"public/board/index.html","hash":"b695bc86646b71033635e06b8fb12d4064f2815e","modified":1643676784027},{"_id":"public/2022/01/31/并发编程的意义/index.html","hash":"d80700a0cddee80e31be8522ac2160400544e08e","modified":1643676784027},{"_id":"public/2022/01/15/hello-world/index.html","hash":"e0f0ddd13736921d3883c70f289664596ce2c3e2","modified":1643676784027},{"_id":"public/categories/并发编程/index.html","hash":"4282e8f8bcf2cd129d48cf642e7bf87a5792ed39","modified":1643676784027},{"_id":"public/archives/index.html","hash":"4afd266b68b68c60af0dfdf1007e087dbbf309d5","modified":1643676784027},{"_id":"public/archives/2022/index.html","hash":"28c31821eb513b6309b19b26e0a17e26bf16a78e","modified":1643676784027},{"_id":"public/archives/2022/01/index.html","hash":"43a07cb866493eb7f93d3f165fdd6a369736ee53","modified":1643676784027},{"_id":"public/index.html","hash":"07a4c4afa0fa2f5a9c8391fcc77207eec0172adb","modified":1643676784027},{"_id":"public/tags/博客/index.html","hash":"dd58a0dcb155889b3e4bdd3f7134e3cfc4aabccd","modified":1643676784027},{"_id":"public/tags/hexo/index.html","hash":"1d224f8e86ed4df755bb77c5b3c19008688570be","modified":1643676784027},{"_id":"public/CNAME","hash":"8ada2b6a73ade6c75dd4a24e7311ae2556095096","modified":1643676784027},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1643676784027},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1643676784027},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1643676784027},{"_id":"public/css/index.css","hash":"c005f350afc767ef772eb8a31fed2c0872be5715","modified":1643676784027},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1643676784027},{"_id":"public/js/utils.js","hash":"3ee4bd9071dc6e854ffa33964f3a8da2ee2a8409","modified":1643676784027},{"_id":"public/js/search/algolia.js","hash":"aaa5e44125dcf321866bc2355a73773b11db8c9c","modified":1643676784027},{"_id":"public/js/search/local-search.js","hash":"72911c7b42e0174a979c09ead3f42ee24136feae","modified":1643676784027},{"_id":"public/js/main.js","hash":"1254dca2c02b3389ec0434cdd2728fdea4ae0216","modified":1643676784027},{"_id":"public/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1643676784027}],"Category":[{"name":"并发编程","_id":"ckz3epwke0008i8r496n320lt"}],"Data":[],"Page":[{"_content":"","source":"board/condition.md","raw":"","date":"2021-12-26T08:50:58.445Z","updated":"2021-12-26T08:50:42.733Z","path":"board/condition.html","title":"","comments":1,"layout":"page","_id":"ckz3epwjv0000i8r461hg4x2w","content":"","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":""},{"title":"board","date":"2022-01-31T10:17:38.458Z","tags":["博客","hexo"],"categories":"并发编程","_content":"\n\n\n# 并发\n\n【高并发】\n\n当前系统能够同时承载的并发数\n\ntps：每秒事务处理的数量\n\nqps：每秒事务查询数量\n\n\n\n# 如何支撑高并发\n\n硬件资源：\n\ncpu：核心数，并行任务数量（几核），程序执行\n\n内存：存储数据；\n\n磁盘：读写；\n\n网卡：数据传输；\n\n软件资源：\n\nCPU -> 线程，8核（同时可以运行8个线程）\n\nIO -> 数据库交互 -> 数据刷到磁盘，内存/缓存/异步刷盘策略（为了提高IO效率）；数据库做分库分表、分布式缓存（1、内存中；2、存储在数据库中是按照特定的数据结构，这些是将关系型数据库中的数据计算出来，将数据非结构化存储在缓存中，减少计算带来的性能损耗）、分布式消息中间件（异步，减少性能损耗，时间）。\n\n单节点遇到瓶颈，多个计算机组成一个分布式计算机。\n\n# 多线程技术\n\njava程序 -> .java源文件（磁盘） -> JVM（编译）.class -> main方法运行这个程序（加载到内存中） -产生一个线程 \n\nCPU来执行这个程序的指令\n\n​\t假设进程中，有一个从磁盘加载一个文件保存到数据库的操作。\n\n​\tCPU的运算效率和磁盘的IO效率。（磁盘->内存->用户空间）\n\n​\tCPU的运算效率比磁盘的IO效率更快，会造成CPU阻塞。\n\n​\tCPU是计算机汇中最核心的资源（CPU阻塞会造成CPU资源浪费）\n\n多道程序设计 ：多进程，让多个进程同时加载到内存，进程之间是相互隔离不影响。\n\n分时系统：利用CPU的时间片切换\n\n线程为轻量级进程\n\n\n\n## 线程特征\n\n- 异步（注册->发送email）\n- 并行（CPU核数）\n\n# java中使用线程\n\n- 集成Thread\n- 实现Runnable\n- Callable/Future\n\n","source":"board/并发编程的意义.md","raw":"---\n\ntitle: board\ndate: 2022年1月31日18:04:39\ntags:\n- 博客\n- hexo\ncategories: 并发编程\n\n---\n\n\n\n# 并发\n\n【高并发】\n\n当前系统能够同时承载的并发数\n\ntps：每秒事务处理的数量\n\nqps：每秒事务查询数量\n\n\n\n# 如何支撑高并发\n\n硬件资源：\n\ncpu：核心数，并行任务数量（几核），程序执行\n\n内存：存储数据；\n\n磁盘：读写；\n\n网卡：数据传输；\n\n软件资源：\n\nCPU -> 线程，8核（同时可以运行8个线程）\n\nIO -> 数据库交互 -> 数据刷到磁盘，内存/缓存/异步刷盘策略（为了提高IO效率）；数据库做分库分表、分布式缓存（1、内存中；2、存储在数据库中是按照特定的数据结构，这些是将关系型数据库中的数据计算出来，将数据非结构化存储在缓存中，减少计算带来的性能损耗）、分布式消息中间件（异步，减少性能损耗，时间）。\n\n单节点遇到瓶颈，多个计算机组成一个分布式计算机。\n\n# 多线程技术\n\njava程序 -> .java源文件（磁盘） -> JVM（编译）.class -> main方法运行这个程序（加载到内存中） -产生一个线程 \n\nCPU来执行这个程序的指令\n\n​\t假设进程中，有一个从磁盘加载一个文件保存到数据库的操作。\n\n​\tCPU的运算效率和磁盘的IO效率。（磁盘->内存->用户空间）\n\n​\tCPU的运算效率比磁盘的IO效率更快，会造成CPU阻塞。\n\n​\tCPU是计算机汇中最核心的资源（CPU阻塞会造成CPU资源浪费）\n\n多道程序设计 ：多进程，让多个进程同时加载到内存，进程之间是相互隔离不影响。\n\n分时系统：利用CPU的时间片切换\n\n线程为轻量级进程\n\n\n\n## 线程特征\n\n- 异步（注册->发送email）\n- 并行（CPU核数）\n\n# java中使用线程\n\n- 集成Thread\n- 实现Runnable\n- Callable/Future\n\n","updated":"2022-01-31T10:17:38.458Z","path":"board/并发编程的意义.html","comments":1,"layout":"page","_id":"ckz3epwk50001i8r48bm7hqdp","content":"<h1 id=\"并发\"><a href=\"#并发\" class=\"headerlink\" title=\"并发\"></a>并发</h1><p>【高并发】</p>\n<p>当前系统能够同时承载的并发数</p>\n<p>tps：每秒事务处理的数量</p>\n<p>qps：每秒事务查询数量</p>\n<h1 id=\"如何支撑高并发\"><a href=\"#如何支撑高并发\" class=\"headerlink\" title=\"如何支撑高并发\"></a>如何支撑高并发</h1><p>硬件资源：</p>\n<p>cpu：核心数，并行任务数量（几核），程序执行</p>\n<p>内存：存储数据；</p>\n<p>磁盘：读写；</p>\n<p>网卡：数据传输；</p>\n<p>软件资源：</p>\n<p>CPU -&gt; 线程，8核（同时可以运行8个线程）</p>\n<p>IO -&gt; 数据库交互 -&gt; 数据刷到磁盘，内存/缓存/异步刷盘策略（为了提高IO效率）；数据库做分库分表、分布式缓存（1、内存中；2、存储在数据库中是按照特定的数据结构，这些是将关系型数据库中的数据计算出来，将数据非结构化存储在缓存中，减少计算带来的性能损耗）、分布式消息中间件（异步，减少性能损耗，时间）。</p>\n<p>单节点遇到瓶颈，多个计算机组成一个分布式计算机。</p>\n<h1 id=\"多线程技术\"><a href=\"#多线程技术\" class=\"headerlink\" title=\"多线程技术\"></a>多线程技术</h1><p>java程序 -&gt; .java源文件（磁盘） -&gt; JVM（编译）.class -&gt; main方法运行这个程序（加载到内存中） -产生一个线程 </p>\n<p>CPU来执行这个程序的指令</p>\n<p>​    假设进程中，有一个从磁盘加载一个文件保存到数据库的操作。</p>\n<p>​    CPU的运算效率和磁盘的IO效率。（磁盘-&gt;内存-&gt;用户空间）</p>\n<p>​    CPU的运算效率比磁盘的IO效率更快，会造成CPU阻塞。</p>\n<p>​    CPU是计算机汇中最核心的资源（CPU阻塞会造成CPU资源浪费）</p>\n<p>多道程序设计 ：多进程，让多个进程同时加载到内存，进程之间是相互隔离不影响。</p>\n<p>分时系统：利用CPU的时间片切换</p>\n<p>线程为轻量级进程</p>\n<h2 id=\"线程特征\"><a href=\"#线程特征\" class=\"headerlink\" title=\"线程特征\"></a>线程特征</h2><ul>\n<li>异步（注册-&gt;发送email）</li>\n<li>并行（CPU核数）</li>\n</ul>\n<h1 id=\"java中使用线程\"><a href=\"#java中使用线程\" class=\"headerlink\" title=\"java中使用线程\"></a>java中使用线程</h1><ul>\n<li>集成Thread</li>\n<li>实现Runnable</li>\n<li>Callable/Future</li>\n</ul>\n","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"并发\"><a href=\"#并发\" class=\"headerlink\" title=\"并发\"></a>并发</h1><p>【高并发】</p>\n<p>当前系统能够同时承载的并发数</p>\n<p>tps：每秒事务处理的数量</p>\n<p>qps：每秒事务查询数量</p>\n<h1 id=\"如何支撑高并发\"><a href=\"#如何支撑高并发\" class=\"headerlink\" title=\"如何支撑高并发\"></a>如何支撑高并发</h1><p>硬件资源：</p>\n<p>cpu：核心数，并行任务数量（几核），程序执行</p>\n<p>内存：存储数据；</p>\n<p>磁盘：读写；</p>\n<p>网卡：数据传输；</p>\n<p>软件资源：</p>\n<p>CPU -&gt; 线程，8核（同时可以运行8个线程）</p>\n<p>IO -&gt; 数据库交互 -&gt; 数据刷到磁盘，内存/缓存/异步刷盘策略（为了提高IO效率）；数据库做分库分表、分布式缓存（1、内存中；2、存储在数据库中是按照特定的数据结构，这些是将关系型数据库中的数据计算出来，将数据非结构化存储在缓存中，减少计算带来的性能损耗）、分布式消息中间件（异步，减少性能损耗，时间）。</p>\n<p>单节点遇到瓶颈，多个计算机组成一个分布式计算机。</p>\n<h1 id=\"多线程技术\"><a href=\"#多线程技术\" class=\"headerlink\" title=\"多线程技术\"></a>多线程技术</h1><p>java程序 -&gt; .java源文件（磁盘） -&gt; JVM（编译）.class -&gt; main方法运行这个程序（加载到内存中） -产生一个线程 </p>\n<p>CPU来执行这个程序的指令</p>\n<p>​    假设进程中，有一个从磁盘加载一个文件保存到数据库的操作。</p>\n<p>​    CPU的运算效率和磁盘的IO效率。（磁盘-&gt;内存-&gt;用户空间）</p>\n<p>​    CPU的运算效率比磁盘的IO效率更快，会造成CPU阻塞。</p>\n<p>​    CPU是计算机汇中最核心的资源（CPU阻塞会造成CPU资源浪费）</p>\n<p>多道程序设计 ：多进程，让多个进程同时加载到内存，进程之间是相互隔离不影响。</p>\n<p>分时系统：利用CPU的时间片切换</p>\n<p>线程为轻量级进程</p>\n<h2 id=\"线程特征\"><a href=\"#线程特征\" class=\"headerlink\" title=\"线程特征\"></a>线程特征</h2><ul>\n<li>异步（注册-&gt;发送email）</li>\n<li>并行（CPU核数）</li>\n</ul>\n<h1 id=\"java中使用线程\"><a href=\"#java中使用线程\" class=\"headerlink\" title=\"java中使用线程\"></a>java中使用线程</h1><ul>\n<li>集成Thread</li>\n<li>实现Runnable</li>\n<li>Callable/Future</li>\n</ul>\n"},{"title":"board","date":"2022-01-31T09:31:13.000Z","_content":"","source":"board/index.md","raw":"---\ntitle: board\ndate: 2022-01-31 17:31:13\n---\n","updated":"2022-01-31T09:31:13.184Z","path":"board/index.html","comments":1,"layout":"page","_id":"ckz3epwk90003i8r4gjmibx0g","content":"","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":""},{"title":"并发编程-同步锁","date":"2022-01-31T10:17:58.411Z","tags":["博客","hexo"],"categories":"并发编程","_content":"\n\n\n\n\n# 并发编程-同步锁\n\n如果多线程在做同一件事\n\n- 原子性  Synchronized，Atomicxxx、lock、\n- 可见性  Synchronized，volatile\n- 有序性  Synchronized，volatile\n\n\n\n\n\n关于线程安全问题的简述\n\n```java\npublic class AtomicDemo {\n\n    int i = 0;\n\n    public  synchronized void incr(){\n        i++;\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        AtomicDemo ad = new AtomicDemo();\n        Thread[] threads = new Thread[2];\n        for (int i = 0; i < 2; i++) {\n           threads[i] = new Thread(() ->{\n               for (int j = 0; j < 10000; j++) {\n                   ad.incr();\n               }\n           });\n           threads[i].start();\n        }\n        threads[0].join();\n        threads[1].join();\n        System.out.println(\"Result:\"+ ad.i);\n    }\n}\n```\n\n## java中同步锁-Synchronized\n\n### Synchronized作用范围\n\n- 修饰实例方法\n- 静态方法\n- 修饰代码块\n\n\n\n//括号中可以存储任何一个对象\n\n```java\nsynchronized (SyncHronizedDemo.class)\n```\n\n影响锁的作用范围，其实本质就是对象的生命周期\n\n抢占锁的本质：\n\n 实现互斥：\n\n- 共享资源\n- 可以是一个标记，0：无锁，1：有锁","source":"board/并发-同步锁.md","raw":"---\ntitle: 并发编程-同步锁\ndate: 2022年1月31日18:04:39\ntags:\n- 博客\n- hexo\ncategories: 并发编程\n---\n\n\n\n\n\n# 并发编程-同步锁\n\n如果多线程在做同一件事\n\n- 原子性  Synchronized，Atomicxxx、lock、\n- 可见性  Synchronized，volatile\n- 有序性  Synchronized，volatile\n\n\n\n\n\n关于线程安全问题的简述\n\n```java\npublic class AtomicDemo {\n\n    int i = 0;\n\n    public  synchronized void incr(){\n        i++;\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        AtomicDemo ad = new AtomicDemo();\n        Thread[] threads = new Thread[2];\n        for (int i = 0; i < 2; i++) {\n           threads[i] = new Thread(() ->{\n               for (int j = 0; j < 10000; j++) {\n                   ad.incr();\n               }\n           });\n           threads[i].start();\n        }\n        threads[0].join();\n        threads[1].join();\n        System.out.println(\"Result:\"+ ad.i);\n    }\n}\n```\n\n## java中同步锁-Synchronized\n\n### Synchronized作用范围\n\n- 修饰实例方法\n- 静态方法\n- 修饰代码块\n\n\n\n//括号中可以存储任何一个对象\n\n```java\nsynchronized (SyncHronizedDemo.class)\n```\n\n影响锁的作用范围，其实本质就是对象的生命周期\n\n抢占锁的本质：\n\n 实现互斥：\n\n- 共享资源\n- 可以是一个标记，0：无锁，1：有锁","updated":"2022-01-31T10:17:58.411Z","path":"board/并发-同步锁.html","comments":1,"layout":"page","_id":"ckz3epwkb0005i8r4co7s3wq0","content":"<h1 id=\"并发编程-同步锁\"><a href=\"#并发编程-同步锁\" class=\"headerlink\" title=\"并发编程-同步锁\"></a>并发编程-同步锁</h1><p>如果多线程在做同一件事</p>\n<ul>\n<li>原子性  Synchronized，Atomicxxx、lock、</li>\n<li>可见性  Synchronized，volatile</li>\n<li>有序性  Synchronized，volatile</li>\n</ul>\n<p>关于线程安全问题的简述</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AtomicDemo</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span>  <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">incr</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        i++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        AtomicDemo ad = <span class=\"keyword\">new</span> AtomicDemo();</span><br><span class=\"line\">        Thread[] threads = <span class=\"keyword\">new</span> Thread[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">           threads[i] = <span class=\"keyword\">new</span> Thread(() -&gt;&#123;</span><br><span class=\"line\">               <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10000</span>; j++) &#123;</span><br><span class=\"line\">                   ad.incr();</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">           &#125;);</span><br><span class=\"line\">           threads[i].start();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        threads[<span class=\"number\">0</span>].join();</span><br><span class=\"line\">        threads[<span class=\"number\">1</span>].join();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Result:&quot;</span>+ ad.i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"java中同步锁-Synchronized\"><a href=\"#java中同步锁-Synchronized\" class=\"headerlink\" title=\"java中同步锁-Synchronized\"></a>java中同步锁-Synchronized</h2><h3 id=\"Synchronized作用范围\"><a href=\"#Synchronized作用范围\" class=\"headerlink\" title=\"Synchronized作用范围\"></a>Synchronized作用范围</h3><ul>\n<li>修饰实例方法</li>\n<li>静态方法</li>\n<li>修饰代码块</li>\n</ul>\n<p>//括号中可以存储任何一个对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">synchronized</span> (SyncHronizedDemo.class)</span><br></pre></td></tr></table></figure>\n\n<p>影响锁的作用范围，其实本质就是对象的生命周期</p>\n<p>抢占锁的本质：</p>\n<p> 实现互斥：</p>\n<ul>\n<li>共享资源</li>\n<li>可以是一个标记，0：无锁，1：有锁</li>\n</ul>\n","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"并发编程-同步锁\"><a href=\"#并发编程-同步锁\" class=\"headerlink\" title=\"并发编程-同步锁\"></a>并发编程-同步锁</h1><p>如果多线程在做同一件事</p>\n<ul>\n<li>原子性  Synchronized，Atomicxxx、lock、</li>\n<li>可见性  Synchronized，volatile</li>\n<li>有序性  Synchronized，volatile</li>\n</ul>\n<p>关于线程安全问题的简述</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AtomicDemo</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span>  <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">incr</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        i++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        AtomicDemo ad = <span class=\"keyword\">new</span> AtomicDemo();</span><br><span class=\"line\">        Thread[] threads = <span class=\"keyword\">new</span> Thread[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">           threads[i] = <span class=\"keyword\">new</span> Thread(() -&gt;&#123;</span><br><span class=\"line\">               <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10000</span>; j++) &#123;</span><br><span class=\"line\">                   ad.incr();</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">           &#125;);</span><br><span class=\"line\">           threads[i].start();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        threads[<span class=\"number\">0</span>].join();</span><br><span class=\"line\">        threads[<span class=\"number\">1</span>].join();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Result:&quot;</span>+ ad.i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"java中同步锁-Synchronized\"><a href=\"#java中同步锁-Synchronized\" class=\"headerlink\" title=\"java中同步锁-Synchronized\"></a>java中同步锁-Synchronized</h2><h3 id=\"Synchronized作用范围\"><a href=\"#Synchronized作用范围\" class=\"headerlink\" title=\"Synchronized作用范围\"></a>Synchronized作用范围</h3><ul>\n<li>修饰实例方法</li>\n<li>静态方法</li>\n<li>修饰代码块</li>\n</ul>\n<p>//括号中可以存储任何一个对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">synchronized</span> (SyncHronizedDemo.class)</span><br></pre></td></tr></table></figure>\n\n<p>影响锁的作用范围，其实本质就是对象的生命周期</p>\n<p>抢占锁的本质：</p>\n<p> 实现互斥：</p>\n<ul>\n<li>共享资源</li>\n<li>可以是一个标记，0：无锁，1：有锁</li>\n</ul>\n"},{"title":"并发编程-可见性有序性","date":"2022-01-31T10:18:16.788Z","tags":["博客","hexo"],"categories":"并发编程","_content":"\n\n\n\n\n# 线程安全—可见性有序性\n\n> volatile\n\n- 线程可见性问题\n\n```java\npublic class VolatileExample {\n    public  static volatile boolean stop = false;\n    public static void main(String[] args) throws InterruptedException {\n        Thread t1 = new Thread(() ->{\n            int i = 0;\n            //活性失败\n            while (!stop){\n                i++;\n                System.out.println(i);\n//                try {\n//                    Thread.sleep(0);\n//                } catch (InterruptedException e) {\n//                    e.printStackTrace();\n//                }\n\n            }\n        });\n        t1.start();\n        System.out.println(\"begin start thread\");\n        Thread.sleep(1000);\n        stop=true;\n    }\n}\n```\n\n- 了解可见性本质\n\n  CPU资源利用问题\n\n  - CPU增加高速缓存\n    - 操作系统中，增加进程、线程。->通过CPU的时间片的切换，提升CPU利用率。\n  - 编译器（JVM的深度优化）\n\n- 从cpu层面了解可见性有序性问题\n- JVM模型\n- Happens-Before模型\n\n\n\n## CPU的高速缓存\n\n> 缓存行\n\n### 伪共享问题\n\n多个线程访问缓存行，某一个线程获得锁访问此缓存行时会将其他置为失效；影响性能。（空间换时间概念，每次线程访问都会加载缓存行）\n\n对齐填充（@Contended注解）\n\n解决不断让缓存失效，不断从内存中加载的问题\n\n填充在基础上填充空的，就不会有其他的线程来竞争 \n\n\n\n## 缓存一致性问题\n\n- 总线锁\n\n- 缓存锁：通过降低锁的范围来增加效率\n\n  - 缓存一致性协议（MESI、MOSI）\n  - MESI表示缓存的四种状态（修改 、失效、独占、共享）：共享的时候需要把所有的置为失效才能进行修改（共享在各个核心CPU中的高速缓存失效，在进行修改，保证一致性），比如修改a=1时，先将缓存中置为失效在修改主内存中的值；每个线程都会对主线程进行监视。\n\n  cpu->cache-缓存锁、总线锁（总线上加一个互斥锁）（Lock）->主内存\n\n  不支持缓存锁的情况下架总线锁（volatile）\n\n\n\n## CPU层面的指令重排序\n\nCPU层面、JVM层面，优化执行的执行顺序\n\n\n\n## CPU层面如何导致指令重排序\n\nCPU把数据存入store buffer中，（异步）在同时通知其他CPU此缓存行失效，不影响后续的指令操作，最后操作数据再存入主线程中。不需要等待，直接往下走（内存屏障）\n\n单线程的重排序不影响结果。\n\n将数据加载到storebuffer中，再通过指令将其他cpu中的缓存行失效，但不影响下面的指令操作（直接读取缓存行的数据），指令完成后其他CPU返回的值更新，同步到缓存以及内存中（保持一致）；最后再读取缓存行的数据（此时已经同步）\n\n## store forwarding/store buffer\n\n\n\n## 内存屏障\n\nCPU层面不知道什么时候不允许优化，什么时候允许优化\n\n解决可见性问题（全屏障，读屏障、写屏障）\n\n- 读屏障（lfence）load\n- 写屏障（sfence）save\n- 全屏障（mfence）mix\n\nlinux：\n\nsmp_rmb-写屏障方法\n\nsmp_wmb-读屏障方法\n\nsmp_mb-读写屏障\n\n## Lock\n\n- 缓存锁/总线锁\n- 内存屏障的问题\n\n在不同的CPU框架中，实现内存屏障的指令不同\n\n- Lock\n- StroeBuffrer\n- LoadBuffer\n\nvolatile：解决多线程下的可见性问题，用到了内存屏障，用到了缓存锁\n\n## jmm\n\njava memory model\n\n- jvm\n\n有序性、可见性问题\n\n​\tvolatile（防止指令重排序）、final（防止指令重排序）、Synchronized\n\n\n\nCPU内存屏障\n\nJMM\n\n\n\n\n\n## Volatile\n\nfinal（内存屏障指令）\n\nfinal只能在构造方法中初始化。\n\n在构造方法中初始化的指令，不允许重排序到构造方法之外。（内存屏障指令  ）\n\n\n\n## Happens-Before\n\n### 规则1：程序顺序型规则（as-if-serial）\n\n------\n\n在单线程中无论指令如何重排序，结果都不会发生变化。\n\n### 规则2：传递性规则\n\n如果A happens before B\n\nB happens before C\n\n那么A happens before C\n\n\n\n### 规则3：volatile变量规则\n\n\n\n\n\n### 规则4：监视器机制\n\n第一个线程来之后监视器会+1，后续来的线程所获取到的值是第一个线程修改后的值。\n\n\n\n### 规则5：start规则\n\n 不存在可见性问题。\n\n```java\nint i = 0;\nThread t1 = new Thread(()->{\n    //读取的值\n});\ni = 20;\nt1.start();\n//读取到的值为20\n```\n\n\n\n### 规则6：join规则\n\n \n\nHappens-before的规则，本质上是描述的可见性规则。\n\n","source":"board/线程安全-可见性有序性.md","raw":"---\ntitle: 并发编程-可见性有序性\ndate: 2022年1月31日18:04:39\ntags:\n- 博客\n- hexo\ncategories: 并发编程\n\n---\n\n\n\n\n\n# 线程安全—可见性有序性\n\n> volatile\n\n- 线程可见性问题\n\n```java\npublic class VolatileExample {\n    public  static volatile boolean stop = false;\n    public static void main(String[] args) throws InterruptedException {\n        Thread t1 = new Thread(() ->{\n            int i = 0;\n            //活性失败\n            while (!stop){\n                i++;\n                System.out.println(i);\n//                try {\n//                    Thread.sleep(0);\n//                } catch (InterruptedException e) {\n//                    e.printStackTrace();\n//                }\n\n            }\n        });\n        t1.start();\n        System.out.println(\"begin start thread\");\n        Thread.sleep(1000);\n        stop=true;\n    }\n}\n```\n\n- 了解可见性本质\n\n  CPU资源利用问题\n\n  - CPU增加高速缓存\n    - 操作系统中，增加进程、线程。->通过CPU的时间片的切换，提升CPU利用率。\n  - 编译器（JVM的深度优化）\n\n- 从cpu层面了解可见性有序性问题\n- JVM模型\n- Happens-Before模型\n\n\n\n## CPU的高速缓存\n\n> 缓存行\n\n### 伪共享问题\n\n多个线程访问缓存行，某一个线程获得锁访问此缓存行时会将其他置为失效；影响性能。（空间换时间概念，每次线程访问都会加载缓存行）\n\n对齐填充（@Contended注解）\n\n解决不断让缓存失效，不断从内存中加载的问题\n\n填充在基础上填充空的，就不会有其他的线程来竞争 \n\n\n\n## 缓存一致性问题\n\n- 总线锁\n\n- 缓存锁：通过降低锁的范围来增加效率\n\n  - 缓存一致性协议（MESI、MOSI）\n  - MESI表示缓存的四种状态（修改 、失效、独占、共享）：共享的时候需要把所有的置为失效才能进行修改（共享在各个核心CPU中的高速缓存失效，在进行修改，保证一致性），比如修改a=1时，先将缓存中置为失效在修改主内存中的值；每个线程都会对主线程进行监视。\n\n  cpu->cache-缓存锁、总线锁（总线上加一个互斥锁）（Lock）->主内存\n\n  不支持缓存锁的情况下架总线锁（volatile）\n\n\n\n## CPU层面的指令重排序\n\nCPU层面、JVM层面，优化执行的执行顺序\n\n\n\n## CPU层面如何导致指令重排序\n\nCPU把数据存入store buffer中，（异步）在同时通知其他CPU此缓存行失效，不影响后续的指令操作，最后操作数据再存入主线程中。不需要等待，直接往下走（内存屏障）\n\n单线程的重排序不影响结果。\n\n将数据加载到storebuffer中，再通过指令将其他cpu中的缓存行失效，但不影响下面的指令操作（直接读取缓存行的数据），指令完成后其他CPU返回的值更新，同步到缓存以及内存中（保持一致）；最后再读取缓存行的数据（此时已经同步）\n\n## store forwarding/store buffer\n\n\n\n## 内存屏障\n\nCPU层面不知道什么时候不允许优化，什么时候允许优化\n\n解决可见性问题（全屏障，读屏障、写屏障）\n\n- 读屏障（lfence）load\n- 写屏障（sfence）save\n- 全屏障（mfence）mix\n\nlinux：\n\nsmp_rmb-写屏障方法\n\nsmp_wmb-读屏障方法\n\nsmp_mb-读写屏障\n\n## Lock\n\n- 缓存锁/总线锁\n- 内存屏障的问题\n\n在不同的CPU框架中，实现内存屏障的指令不同\n\n- Lock\n- StroeBuffrer\n- LoadBuffer\n\nvolatile：解决多线程下的可见性问题，用到了内存屏障，用到了缓存锁\n\n## jmm\n\njava memory model\n\n- jvm\n\n有序性、可见性问题\n\n​\tvolatile（防止指令重排序）、final（防止指令重排序）、Synchronized\n\n\n\nCPU内存屏障\n\nJMM\n\n\n\n\n\n## Volatile\n\nfinal（内存屏障指令）\n\nfinal只能在构造方法中初始化。\n\n在构造方法中初始化的指令，不允许重排序到构造方法之外。（内存屏障指令  ）\n\n\n\n## Happens-Before\n\n### 规则1：程序顺序型规则（as-if-serial）\n\n------\n\n在单线程中无论指令如何重排序，结果都不会发生变化。\n\n### 规则2：传递性规则\n\n如果A happens before B\n\nB happens before C\n\n那么A happens before C\n\n\n\n### 规则3：volatile变量规则\n\n\n\n\n\n### 规则4：监视器机制\n\n第一个线程来之后监视器会+1，后续来的线程所获取到的值是第一个线程修改后的值。\n\n\n\n### 规则5：start规则\n\n 不存在可见性问题。\n\n```java\nint i = 0;\nThread t1 = new Thread(()->{\n    //读取的值\n});\ni = 20;\nt1.start();\n//读取到的值为20\n```\n\n\n\n### 规则6：join规则\n\n \n\nHappens-before的规则，本质上是描述的可见性规则。\n\n","updated":"2022-01-31T10:18:16.788Z","path":"board/线程安全-可见性有序性.html","comments":1,"layout":"page","_id":"ckz3epwkd0007i8r432ow5n77","content":"<h1 id=\"线程安全—可见性有序性\"><a href=\"#线程安全—可见性有序性\" class=\"headerlink\" title=\"线程安全—可见性有序性\"></a>线程安全—可见性有序性</h1><blockquote>\n<p>volatile</p>\n</blockquote>\n<ul>\n<li>线程可见性问题</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">VolatileExample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>  <span class=\"keyword\">static</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> stop = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        Thread t1 = <span class=\"keyword\">new</span> Thread(() -&gt;&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"comment\">//活性失败</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> (!stop)&#123;</span><br><span class=\"line\">                i++;</span><br><span class=\"line\">                System.out.println(i);</span><br><span class=\"line\"><span class=\"comment\">//                try &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                    Thread.sleep(0);</span></span><br><span class=\"line\"><span class=\"comment\">//                &#125; catch (InterruptedException e) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                    e.printStackTrace();</span></span><br><span class=\"line\"><span class=\"comment\">//                &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        t1.start();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;begin start thread&quot;</span>);</span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">        stop=<span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>了解可见性本质</p>\n<p>CPU资源利用问题</p>\n<ul>\n<li>CPU增加高速缓存<ul>\n<li>操作系统中，增加进程、线程。-&gt;通过CPU的时间片的切换，提升CPU利用率。</li>\n</ul>\n</li>\n<li>编译器（JVM的深度优化）</li>\n</ul>\n</li>\n<li><p>从cpu层面了解可见性有序性问题</p>\n</li>\n<li><p>JVM模型</p>\n</li>\n<li><p>Happens-Before模型</p>\n</li>\n</ul>\n<h2 id=\"CPU的高速缓存\"><a href=\"#CPU的高速缓存\" class=\"headerlink\" title=\"CPU的高速缓存\"></a>CPU的高速缓存</h2><blockquote>\n<p>缓存行</p>\n</blockquote>\n<h3 id=\"伪共享问题\"><a href=\"#伪共享问题\" class=\"headerlink\" title=\"伪共享问题\"></a>伪共享问题</h3><p>多个线程访问缓存行，某一个线程获得锁访问此缓存行时会将其他置为失效；影响性能。（空间换时间概念，每次线程访问都会加载缓存行）</p>\n<p>对齐填充（@Contended注解）</p>\n<p>解决不断让缓存失效，不断从内存中加载的问题</p>\n<p>填充在基础上填充空的，就不会有其他的线程来竞争 </p>\n<h2 id=\"缓存一致性问题\"><a href=\"#缓存一致性问题\" class=\"headerlink\" title=\"缓存一致性问题\"></a>缓存一致性问题</h2><ul>\n<li><p>总线锁</p>\n</li>\n<li><p>缓存锁：通过降低锁的范围来增加效率</p>\n<ul>\n<li>缓存一致性协议（MESI、MOSI）</li>\n<li>MESI表示缓存的四种状态（修改 、失效、独占、共享）：共享的时候需要把所有的置为失效才能进行修改（共享在各个核心CPU中的高速缓存失效，在进行修改，保证一致性），比如修改a=1时，先将缓存中置为失效在修改主内存中的值；每个线程都会对主线程进行监视。</li>\n</ul>\n<p>cpu-&gt;cache-缓存锁、总线锁（总线上加一个互斥锁）（Lock）-&gt;主内存</p>\n<p>不支持缓存锁的情况下架总线锁（volatile）</p>\n</li>\n</ul>\n<h2 id=\"CPU层面的指令重排序\"><a href=\"#CPU层面的指令重排序\" class=\"headerlink\" title=\"CPU层面的指令重排序\"></a>CPU层面的指令重排序</h2><p>CPU层面、JVM层面，优化执行的执行顺序</p>\n<h2 id=\"CPU层面如何导致指令重排序\"><a href=\"#CPU层面如何导致指令重排序\" class=\"headerlink\" title=\"CPU层面如何导致指令重排序\"></a>CPU层面如何导致指令重排序</h2><p>CPU把数据存入store buffer中，（异步）在同时通知其他CPU此缓存行失效，不影响后续的指令操作，最后操作数据再存入主线程中。不需要等待，直接往下走（内存屏障）</p>\n<p>单线程的重排序不影响结果。</p>\n<p>将数据加载到storebuffer中，再通过指令将其他cpu中的缓存行失效，但不影响下面的指令操作（直接读取缓存行的数据），指令完成后其他CPU返回的值更新，同步到缓存以及内存中（保持一致）；最后再读取缓存行的数据（此时已经同步）</p>\n<h2 id=\"store-forwarding-store-buffer\"><a href=\"#store-forwarding-store-buffer\" class=\"headerlink\" title=\"store forwarding/store buffer\"></a>store forwarding/store buffer</h2><h2 id=\"内存屏障\"><a href=\"#内存屏障\" class=\"headerlink\" title=\"内存屏障\"></a>内存屏障</h2><p>CPU层面不知道什么时候不允许优化，什么时候允许优化</p>\n<p>解决可见性问题（全屏障，读屏障、写屏障）</p>\n<ul>\n<li>读屏障（lfence）load</li>\n<li>写屏障（sfence）save</li>\n<li>全屏障（mfence）mix</li>\n</ul>\n<p>linux：</p>\n<p>smp_rmb-写屏障方法</p>\n<p>smp_wmb-读屏障方法</p>\n<p>smp_mb-读写屏障</p>\n<h2 id=\"Lock\"><a href=\"#Lock\" class=\"headerlink\" title=\"Lock\"></a>Lock</h2><ul>\n<li>缓存锁/总线锁</li>\n<li>内存屏障的问题</li>\n</ul>\n<p>在不同的CPU框架中，实现内存屏障的指令不同</p>\n<ul>\n<li>Lock</li>\n<li>StroeBuffrer</li>\n<li>LoadBuffer</li>\n</ul>\n<p>volatile：解决多线程下的可见性问题，用到了内存屏障，用到了缓存锁</p>\n<h2 id=\"jmm\"><a href=\"#jmm\" class=\"headerlink\" title=\"jmm\"></a>jmm</h2><p>java memory model</p>\n<ul>\n<li>jvm</li>\n</ul>\n<p>有序性、可见性问题</p>\n<p>​    volatile（防止指令重排序）、final（防止指令重排序）、Synchronized</p>\n<p>CPU内存屏障</p>\n<p>JMM</p>\n<h2 id=\"Volatile\"><a href=\"#Volatile\" class=\"headerlink\" title=\"Volatile\"></a>Volatile</h2><p>final（内存屏障指令）</p>\n<p>final只能在构造方法中初始化。</p>\n<p>在构造方法中初始化的指令，不允许重排序到构造方法之外。（内存屏障指令  ）</p>\n<h2 id=\"Happens-Before\"><a href=\"#Happens-Before\" class=\"headerlink\" title=\"Happens-Before\"></a>Happens-Before</h2><h3 id=\"规则1：程序顺序型规则（as-if-serial）\"><a href=\"#规则1：程序顺序型规则（as-if-serial）\" class=\"headerlink\" title=\"规则1：程序顺序型规则（as-if-serial）\"></a>规则1：程序顺序型规则（as-if-serial）</h3><hr>\n<p>在单线程中无论指令如何重排序，结果都不会发生变化。</p>\n<h3 id=\"规则2：传递性规则\"><a href=\"#规则2：传递性规则\" class=\"headerlink\" title=\"规则2：传递性规则\"></a>规则2：传递性规则</h3><p>如果A happens before B</p>\n<p>B happens before C</p>\n<p>那么A happens before C</p>\n<h3 id=\"规则3：volatile变量规则\"><a href=\"#规则3：volatile变量规则\" class=\"headerlink\" title=\"规则3：volatile变量规则\"></a>规则3：volatile变量规则</h3><h3 id=\"规则4：监视器机制\"><a href=\"#规则4：监视器机制\" class=\"headerlink\" title=\"规则4：监视器机制\"></a>规则4：监视器机制</h3><p>第一个线程来之后监视器会+1，后续来的线程所获取到的值是第一个线程修改后的值。</p>\n<h3 id=\"规则5：start规则\"><a href=\"#规则5：start规则\" class=\"headerlink\" title=\"规则5：start规则\"></a>规则5：start规则</h3><p> 不存在可见性问题。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">Thread t1 = <span class=\"keyword\">new</span> Thread(()-&gt;&#123;</span><br><span class=\"line\">    <span class=\"comment\">//读取的值</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">i = <span class=\"number\">20</span>;</span><br><span class=\"line\">t1.start();</span><br><span class=\"line\"><span class=\"comment\">//读取到的值为20</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"规则6：join规则\"><a href=\"#规则6：join规则\" class=\"headerlink\" title=\"规则6：join规则\"></a>规则6：join规则</h3><p>Happens-before的规则，本质上是描述的可见性规则。</p>\n","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"线程安全—可见性有序性\"><a href=\"#线程安全—可见性有序性\" class=\"headerlink\" title=\"线程安全—可见性有序性\"></a>线程安全—可见性有序性</h1><blockquote>\n<p>volatile</p>\n</blockquote>\n<ul>\n<li>线程可见性问题</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">VolatileExample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>  <span class=\"keyword\">static</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> stop = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        Thread t1 = <span class=\"keyword\">new</span> Thread(() -&gt;&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"comment\">//活性失败</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> (!stop)&#123;</span><br><span class=\"line\">                i++;</span><br><span class=\"line\">                System.out.println(i);</span><br><span class=\"line\"><span class=\"comment\">//                try &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                    Thread.sleep(0);</span></span><br><span class=\"line\"><span class=\"comment\">//                &#125; catch (InterruptedException e) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                    e.printStackTrace();</span></span><br><span class=\"line\"><span class=\"comment\">//                &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        t1.start();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;begin start thread&quot;</span>);</span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">        stop=<span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>了解可见性本质</p>\n<p>CPU资源利用问题</p>\n<ul>\n<li>CPU增加高速缓存<ul>\n<li>操作系统中，增加进程、线程。-&gt;通过CPU的时间片的切换，提升CPU利用率。</li>\n</ul>\n</li>\n<li>编译器（JVM的深度优化）</li>\n</ul>\n</li>\n<li><p>从cpu层面了解可见性有序性问题</p>\n</li>\n<li><p>JVM模型</p>\n</li>\n<li><p>Happens-Before模型</p>\n</li>\n</ul>\n<h2 id=\"CPU的高速缓存\"><a href=\"#CPU的高速缓存\" class=\"headerlink\" title=\"CPU的高速缓存\"></a>CPU的高速缓存</h2><blockquote>\n<p>缓存行</p>\n</blockquote>\n<h3 id=\"伪共享问题\"><a href=\"#伪共享问题\" class=\"headerlink\" title=\"伪共享问题\"></a>伪共享问题</h3><p>多个线程访问缓存行，某一个线程获得锁访问此缓存行时会将其他置为失效；影响性能。（空间换时间概念，每次线程访问都会加载缓存行）</p>\n<p>对齐填充（@Contended注解）</p>\n<p>解决不断让缓存失效，不断从内存中加载的问题</p>\n<p>填充在基础上填充空的，就不会有其他的线程来竞争 </p>\n<h2 id=\"缓存一致性问题\"><a href=\"#缓存一致性问题\" class=\"headerlink\" title=\"缓存一致性问题\"></a>缓存一致性问题</h2><ul>\n<li><p>总线锁</p>\n</li>\n<li><p>缓存锁：通过降低锁的范围来增加效率</p>\n<ul>\n<li>缓存一致性协议（MESI、MOSI）</li>\n<li>MESI表示缓存的四种状态（修改 、失效、独占、共享）：共享的时候需要把所有的置为失效才能进行修改（共享在各个核心CPU中的高速缓存失效，在进行修改，保证一致性），比如修改a=1时，先将缓存中置为失效在修改主内存中的值；每个线程都会对主线程进行监视。</li>\n</ul>\n<p>cpu-&gt;cache-缓存锁、总线锁（总线上加一个互斥锁）（Lock）-&gt;主内存</p>\n<p>不支持缓存锁的情况下架总线锁（volatile）</p>\n</li>\n</ul>\n<h2 id=\"CPU层面的指令重排序\"><a href=\"#CPU层面的指令重排序\" class=\"headerlink\" title=\"CPU层面的指令重排序\"></a>CPU层面的指令重排序</h2><p>CPU层面、JVM层面，优化执行的执行顺序</p>\n<h2 id=\"CPU层面如何导致指令重排序\"><a href=\"#CPU层面如何导致指令重排序\" class=\"headerlink\" title=\"CPU层面如何导致指令重排序\"></a>CPU层面如何导致指令重排序</h2><p>CPU把数据存入store buffer中，（异步）在同时通知其他CPU此缓存行失效，不影响后续的指令操作，最后操作数据再存入主线程中。不需要等待，直接往下走（内存屏障）</p>\n<p>单线程的重排序不影响结果。</p>\n<p>将数据加载到storebuffer中，再通过指令将其他cpu中的缓存行失效，但不影响下面的指令操作（直接读取缓存行的数据），指令完成后其他CPU返回的值更新，同步到缓存以及内存中（保持一致）；最后再读取缓存行的数据（此时已经同步）</p>\n<h2 id=\"store-forwarding-store-buffer\"><a href=\"#store-forwarding-store-buffer\" class=\"headerlink\" title=\"store forwarding/store buffer\"></a>store forwarding/store buffer</h2><h2 id=\"内存屏障\"><a href=\"#内存屏障\" class=\"headerlink\" title=\"内存屏障\"></a>内存屏障</h2><p>CPU层面不知道什么时候不允许优化，什么时候允许优化</p>\n<p>解决可见性问题（全屏障，读屏障、写屏障）</p>\n<ul>\n<li>读屏障（lfence）load</li>\n<li>写屏障（sfence）save</li>\n<li>全屏障（mfence）mix</li>\n</ul>\n<p>linux：</p>\n<p>smp_rmb-写屏障方法</p>\n<p>smp_wmb-读屏障方法</p>\n<p>smp_mb-读写屏障</p>\n<h2 id=\"Lock\"><a href=\"#Lock\" class=\"headerlink\" title=\"Lock\"></a>Lock</h2><ul>\n<li>缓存锁/总线锁</li>\n<li>内存屏障的问题</li>\n</ul>\n<p>在不同的CPU框架中，实现内存屏障的指令不同</p>\n<ul>\n<li>Lock</li>\n<li>StroeBuffrer</li>\n<li>LoadBuffer</li>\n</ul>\n<p>volatile：解决多线程下的可见性问题，用到了内存屏障，用到了缓存锁</p>\n<h2 id=\"jmm\"><a href=\"#jmm\" class=\"headerlink\" title=\"jmm\"></a>jmm</h2><p>java memory model</p>\n<ul>\n<li>jvm</li>\n</ul>\n<p>有序性、可见性问题</p>\n<p>​    volatile（防止指令重排序）、final（防止指令重排序）、Synchronized</p>\n<p>CPU内存屏障</p>\n<p>JMM</p>\n<h2 id=\"Volatile\"><a href=\"#Volatile\" class=\"headerlink\" title=\"Volatile\"></a>Volatile</h2><p>final（内存屏障指令）</p>\n<p>final只能在构造方法中初始化。</p>\n<p>在构造方法中初始化的指令，不允许重排序到构造方法之外。（内存屏障指令  ）</p>\n<h2 id=\"Happens-Before\"><a href=\"#Happens-Before\" class=\"headerlink\" title=\"Happens-Before\"></a>Happens-Before</h2><h3 id=\"规则1：程序顺序型规则（as-if-serial）\"><a href=\"#规则1：程序顺序型规则（as-if-serial）\" class=\"headerlink\" title=\"规则1：程序顺序型规则（as-if-serial）\"></a>规则1：程序顺序型规则（as-if-serial）</h3><hr>\n<p>在单线程中无论指令如何重排序，结果都不会发生变化。</p>\n<h3 id=\"规则2：传递性规则\"><a href=\"#规则2：传递性规则\" class=\"headerlink\" title=\"规则2：传递性规则\"></a>规则2：传递性规则</h3><p>如果A happens before B</p>\n<p>B happens before C</p>\n<p>那么A happens before C</p>\n<h3 id=\"规则3：volatile变量规则\"><a href=\"#规则3：volatile变量规则\" class=\"headerlink\" title=\"规则3：volatile变量规则\"></a>规则3：volatile变量规则</h3><h3 id=\"规则4：监视器机制\"><a href=\"#规则4：监视器机制\" class=\"headerlink\" title=\"规则4：监视器机制\"></a>规则4：监视器机制</h3><p>第一个线程来之后监视器会+1，后续来的线程所获取到的值是第一个线程修改后的值。</p>\n<h3 id=\"规则5：start规则\"><a href=\"#规则5：start规则\" class=\"headerlink\" title=\"规则5：start规则\"></a>规则5：start规则</h3><p> 不存在可见性问题。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">Thread t1 = <span class=\"keyword\">new</span> Thread(()-&gt;&#123;</span><br><span class=\"line\">    <span class=\"comment\">//读取的值</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">i = <span class=\"number\">20</span>;</span><br><span class=\"line\">t1.start();</span><br><span class=\"line\"><span class=\"comment\">//读取到的值为20</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"规则6：join规则\"><a href=\"#规则6：join规则\" class=\"headerlink\" title=\"规则6：join规则\"></a>规则6：join规则</h3><p>Happens-before的规则，本质上是描述的可见性规则。</p>\n"}],"Post":[{"title":"newpage","_content":"","source":"_drafts/newpage.md","raw":"---\ntitle: newpage\ntags:\n---\n","slug":"newpage","published":0,"date":"2022-01-31T09:33:51.346Z","updated":"2022-01-31T09:33:51.347Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckz3epwk60002i8r4c2ww3mdz","content":"","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":""},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2022-01-15T15:38:46.219Z","updated":"1985-10-26T08:15:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckz3epwka0004i8r43t3t1e4h","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"board","date":"2022-01-31T10:06:14.801Z","_content":"\n\n\n# 并发\n\n【高并发】\n\n当前系统能够同时承载的并发数\n\ntps：每秒事务处理的数量\n\nqps：每秒事务查询数量\n\n\n\n# 如何支撑高并发\n\n硬件资源：\n\ncpu：核心数，并行任务数量（几核），程序执行\n\n内存：存储数据；\n\n磁盘：读写；\n\n网卡：数据传输；\n\n软件资源：\n\nCPU -> 线程，8核（同时可以运行8个线程）\n\nIO -> 数据库交互 -> 数据刷到磁盘，内存/缓存/异步刷盘策略（为了提高IO效率）；数据库做分库分表、分布式缓存（1、内存中；2、存储在数据库中是按照特定的数据结构，这些是将关系型数据库中的数据计算出来，将数据非结构化存储在缓存中，减少计算带来的性能损耗）、分布式消息中间件（异步，减少性能损耗，时间）。\n\n单节点遇到瓶颈，多个计算机组成一个分布式计算机。\n\n# 多线程技术\n\njava程序 -> .java源文件（磁盘） -> JVM（编译）.class -> main方法运行这个程序（加载到内存中） -产生一个线程 \n\nCPU来执行这个程序的指令\n\n​\t假设进程中，有一个从磁盘加载一个文件保存到数据库的操作。\n\n​\tCPU的运算效率和磁盘的IO效率。（磁盘->内存->用户空间）\n\n​\tCPU的运算效率比磁盘的IO效率更快，会造成CPU阻塞。\n\n​\tCPU是计算机汇中最核心的资源（CPU阻塞会造成CPU资源浪费）\n\n多道程序设计 ：多进程，让多个进程同时加载到内存，进程之间是相互隔离不影响。\n\n分时系统：利用CPU的时间片切换\n\n线程为轻量级进程\n\n\n\n## 线程特征\n\n- 异步（注册->发送email）\n- 并行（CPU核数）\n\n# java中使用线程\n\n- 集成Thread\n- 实现Runnable\n- Callable/Future\n\n","source":"_posts/并发编程的意义.md","raw":"---\n\ntitle: board\ndate: 2022年1月31日18:04:39\ntags:\n- 博客\n- hexo\ncategories: 并发编程\n\n---\n\n\n\n# 并发\n\n【高并发】\n\n当前系统能够同时承载的并发数\n\ntps：每秒事务处理的数量\n\nqps：每秒事务查询数量\n\n\n\n# 如何支撑高并发\n\n硬件资源：\n\ncpu：核心数，并行任务数量（几核），程序执行\n\n内存：存储数据；\n\n磁盘：读写；\n\n网卡：数据传输；\n\n软件资源：\n\nCPU -> 线程，8核（同时可以运行8个线程）\n\nIO -> 数据库交互 -> 数据刷到磁盘，内存/缓存/异步刷盘策略（为了提高IO效率）；数据库做分库分表、分布式缓存（1、内存中；2、存储在数据库中是按照特定的数据结构，这些是将关系型数据库中的数据计算出来，将数据非结构化存储在缓存中，减少计算带来的性能损耗）、分布式消息中间件（异步，减少性能损耗，时间）。\n\n单节点遇到瓶颈，多个计算机组成一个分布式计算机。\n\n# 多线程技术\n\njava程序 -> .java源文件（磁盘） -> JVM（编译）.class -> main方法运行这个程序（加载到内存中） -产生一个线程 \n\nCPU来执行这个程序的指令\n\n​\t假设进程中，有一个从磁盘加载一个文件保存到数据库的操作。\n\n​\tCPU的运算效率和磁盘的IO效率。（磁盘->内存->用户空间）\n\n​\tCPU的运算效率比磁盘的IO效率更快，会造成CPU阻塞。\n\n​\tCPU是计算机汇中最核心的资源（CPU阻塞会造成CPU资源浪费）\n\n多道程序设计 ：多进程，让多个进程同时加载到内存，进程之间是相互隔离不影响。\n\n分时系统：利用CPU的时间片切换\n\n线程为轻量级进程\n\n\n\n## 线程特征\n\n- 异步（注册->发送email）\n- 并行（CPU核数）\n\n# java中使用线程\n\n- 集成Thread\n- 实现Runnable\n- Callable/Future\n\n","slug":"并发编程的意义","published":1,"updated":"2022-01-31T10:17:09.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckz3epwkc0006i8r4c7mw99c3","content":"<h1 id=\"并发\"><a href=\"#并发\" class=\"headerlink\" title=\"并发\"></a>并发</h1><p>【高并发】</p>\n<p>当前系统能够同时承载的并发数</p>\n<p>tps：每秒事务处理的数量</p>\n<p>qps：每秒事务查询数量</p>\n<h1 id=\"如何支撑高并发\"><a href=\"#如何支撑高并发\" class=\"headerlink\" title=\"如何支撑高并发\"></a>如何支撑高并发</h1><p>硬件资源：</p>\n<p>cpu：核心数，并行任务数量（几核），程序执行</p>\n<p>内存：存储数据；</p>\n<p>磁盘：读写；</p>\n<p>网卡：数据传输；</p>\n<p>软件资源：</p>\n<p>CPU -&gt; 线程，8核（同时可以运行8个线程）</p>\n<p>IO -&gt; 数据库交互 -&gt; 数据刷到磁盘，内存/缓存/异步刷盘策略（为了提高IO效率）；数据库做分库分表、分布式缓存（1、内存中；2、存储在数据库中是按照特定的数据结构，这些是将关系型数据库中的数据计算出来，将数据非结构化存储在缓存中，减少计算带来的性能损耗）、分布式消息中间件（异步，减少性能损耗，时间）。</p>\n<p>单节点遇到瓶颈，多个计算机组成一个分布式计算机。</p>\n<h1 id=\"多线程技术\"><a href=\"#多线程技术\" class=\"headerlink\" title=\"多线程技术\"></a>多线程技术</h1><p>java程序 -&gt; .java源文件（磁盘） -&gt; JVM（编译）.class -&gt; main方法运行这个程序（加载到内存中） -产生一个线程 </p>\n<p>CPU来执行这个程序的指令</p>\n<p>​    假设进程中，有一个从磁盘加载一个文件保存到数据库的操作。</p>\n<p>​    CPU的运算效率和磁盘的IO效率。（磁盘-&gt;内存-&gt;用户空间）</p>\n<p>​    CPU的运算效率比磁盘的IO效率更快，会造成CPU阻塞。</p>\n<p>​    CPU是计算机汇中最核心的资源（CPU阻塞会造成CPU资源浪费）</p>\n<p>多道程序设计 ：多进程，让多个进程同时加载到内存，进程之间是相互隔离不影响。</p>\n<p>分时系统：利用CPU的时间片切换</p>\n<p>线程为轻量级进程</p>\n<h2 id=\"线程特征\"><a href=\"#线程特征\" class=\"headerlink\" title=\"线程特征\"></a>线程特征</h2><ul>\n<li>异步（注册-&gt;发送email）</li>\n<li>并行（CPU核数）</li>\n</ul>\n<h1 id=\"java中使用线程\"><a href=\"#java中使用线程\" class=\"headerlink\" title=\"java中使用线程\"></a>java中使用线程</h1><ul>\n<li>集成Thread</li>\n<li>实现Runnable</li>\n<li>Callable/Future</li>\n</ul>\n","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"并发\"><a href=\"#并发\" class=\"headerlink\" title=\"并发\"></a>并发</h1><p>【高并发】</p>\n<p>当前系统能够同时承载的并发数</p>\n<p>tps：每秒事务处理的数量</p>\n<p>qps：每秒事务查询数量</p>\n<h1 id=\"如何支撑高并发\"><a href=\"#如何支撑高并发\" class=\"headerlink\" title=\"如何支撑高并发\"></a>如何支撑高并发</h1><p>硬件资源：</p>\n<p>cpu：核心数，并行任务数量（几核），程序执行</p>\n<p>内存：存储数据；</p>\n<p>磁盘：读写；</p>\n<p>网卡：数据传输；</p>\n<p>软件资源：</p>\n<p>CPU -&gt; 线程，8核（同时可以运行8个线程）</p>\n<p>IO -&gt; 数据库交互 -&gt; 数据刷到磁盘，内存/缓存/异步刷盘策略（为了提高IO效率）；数据库做分库分表、分布式缓存（1、内存中；2、存储在数据库中是按照特定的数据结构，这些是将关系型数据库中的数据计算出来，将数据非结构化存储在缓存中，减少计算带来的性能损耗）、分布式消息中间件（异步，减少性能损耗，时间）。</p>\n<p>单节点遇到瓶颈，多个计算机组成一个分布式计算机。</p>\n<h1 id=\"多线程技术\"><a href=\"#多线程技术\" class=\"headerlink\" title=\"多线程技术\"></a>多线程技术</h1><p>java程序 -&gt; .java源文件（磁盘） -&gt; JVM（编译）.class -&gt; main方法运行这个程序（加载到内存中） -产生一个线程 </p>\n<p>CPU来执行这个程序的指令</p>\n<p>​    假设进程中，有一个从磁盘加载一个文件保存到数据库的操作。</p>\n<p>​    CPU的运算效率和磁盘的IO效率。（磁盘-&gt;内存-&gt;用户空间）</p>\n<p>​    CPU的运算效率比磁盘的IO效率更快，会造成CPU阻塞。</p>\n<p>​    CPU是计算机汇中最核心的资源（CPU阻塞会造成CPU资源浪费）</p>\n<p>多道程序设计 ：多进程，让多个进程同时加载到内存，进程之间是相互隔离不影响。</p>\n<p>分时系统：利用CPU的时间片切换</p>\n<p>线程为轻量级进程</p>\n<h2 id=\"线程特征\"><a href=\"#线程特征\" class=\"headerlink\" title=\"线程特征\"></a>线程特征</h2><ul>\n<li>异步（注册-&gt;发送email）</li>\n<li>并行（CPU核数）</li>\n</ul>\n<h1 id=\"java中使用线程\"><a href=\"#java中使用线程\" class=\"headerlink\" title=\"java中使用线程\"></a>java中使用线程</h1><ul>\n<li>集成Thread</li>\n<li>实现Runnable</li>\n<li>Callable/Future</li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckz3epwkc0006i8r4c7mw99c3","category_id":"ckz3epwke0008i8r496n320lt","_id":"ckz3epwkh000bi8r420ms0u3p"}],"PostTag":[{"post_id":"ckz3epwkc0006i8r4c7mw99c3","tag_id":"ckz3epwkg0009i8r4h3ym009k","_id":"ckz3epwki000ci8r4ewbyhzlz"},{"post_id":"ckz3epwkc0006i8r4c7mw99c3","tag_id":"ckz3epwkh000ai8r4bh3qfpwv","_id":"ckz3epwki000di8r46e983jef"}],"Tag":[{"name":"博客","_id":"ckz3epwkg0009i8r4h3ym009k"},{"name":"hexo","_id":"ckz3epwkh000ai8r4bh3qfpwv"}]}}